{% extends "base.html" %}
{% block title %}Kunlik xulosa — {{ APP_NAME }}{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold text-slate-800 mb-4">Kunlik xulosa</h1>
<form method="get" class="flex gap-2 mb-4 flex-wrap items-center">
  <input type="date" name="date" value="{{ selected_date }}" class="rounded-lg border border-slate-300 shadow-sm focus:ring-2 focus:ring-slate-500 focus:border-slate-500 px-3 py-2 text-slate-900 min-h-[42px]">
  <select name="status" class="rounded-lg border border-slate-300 shadow-sm focus:ring-2 focus:ring-slate-500 focus:border-slate-500 px-3 py-2 bg-white text-slate-900 min-h-[42px]"><option value="">Hammasi</option><option value="present">Keldi</option><option value="late">Kechikdi</option><option value="absent">Kelmadi</option></select>
  <button type="submit" class="px-4 py-2 bg-slate-200 rounded-lg hover:bg-slate-300">Qo‘llash</button>
</form>
<div class="bg-white rounded-xl shadow border overflow-hidden">
  <table class="min-w-full divide-y divide-slate-200">
    <thead class="bg-slate-50">
      <tr>
        <th class="px-4 py-2 text-left text-xs font-medium text-slate-600">Xodim</th>
        <th class="px-4 py-2 text-left text-xs font-medium text-slate-600">Holat</th>
        <th class="px-4 py-2 text-left text-xs font-medium text-slate-600">Kelish</th>
        <th class="px-4 py-2 text-left text-xs font-medium text-slate-600">Ketish</th>
        <th class="px-4 py-2 text-left text-xs font-medium text-slate-600">Ishlash (daq)</th>
        <th class="px-4 py-2 text-left text-xs font-medium text-slate-600">Kechikish (daq)</th>
      </tr>
    </thead>
    <tbody>
      {% for s in summaries %}
      <tr class="hover:bg-slate-50">
        <td class="px-4 py-2">{{ s.employee.employee_id }} {{ s.employee.get_full_name }}</td>
        <td class="px-4 py-2">{{ s.get_status_display }}</td>
        <td class="px-4 py-2">{% if s.check_in_time %}{{ s.check_in_time|time:"H:i" }}{% else %}—{% endif %}</td>
        <td class="px-4 py-2">{% if s.check_out_time %}{{ s.check_out_time|time:"H:i" }}{% else %}—{% endif %}</td>
        <td class="px-4 py-2">{{ s.working_minutes }}</td>
        <td class="px-4 py-2">{{ s.minutes_late }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="px-4 py-8 text-center text-slate-500">Ushbu sana uchun ma’lumot yo‘q.</td></tr>
      {% endfor %}
    </tbody>
  </table>
  {% if page_obj.has_other_pages %}
  <div class="p-3 border-t flex justify-between">
    <span>{{ page_obj.number }}-sahifa</span>
    {% if page_obj.has_previous %}<a href="?date={{ selected_date }}&page={{ page_obj.previous_page_number }}">Oldingi</a>{% endif %}
    {% if page_obj.has_next %}<a href="?date={{ selected_date }}&page={{ page_obj.next_page_number }}">Keyingi</a>{% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}
