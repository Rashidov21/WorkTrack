<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE|default:'uz' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% trans "Kirish" %} — {{ APP_NAME }}</title>
  {% load static i18n %}
  <link rel="icon" type="image/svg+xml" href="{% static 'favicon.svg' %}">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@tailwindcss/forms@0.5.7"></script>
</head>
<body class="bg-slate-100 min-h-screen flex flex-col items-center justify-center p-4">
  <div class="w-full max-w-md bg-white rounded-xl shadow-lg border border-slate-200 p-6">
    {% get_current_language as LANGUAGE_CODE %}
    {% get_available_languages as LANGUAGES %}
    <div class="flex justify-end gap-1 mb-2">
      <form action="{% url 'set_language' %}" method="post" class="flex gap-1">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ request.get_full_path }}">
        {% for lang_code, lang_name in LANGUAGES %}
        <button type="submit" name="language" value="{{ lang_code }}" class="text-xs px-2 py-1 rounded {% if LANGUAGE_CODE == lang_code %}bg-slate-700 text-white{% else %}bg-slate-200 text-slate-600 hover:bg-slate-300{% endif %}">{{ lang_name }}</button>
        {% endfor %}
      </form>
    </div>
    <div class="flex items-center justify-center gap-3 mb-6">
      <img src="{% static 'favicon.svg' %}" alt="" class="w-14 h-14 rounded-xl" aria-hidden="true">
      <span class="text-2xl font-bold text-slate-800">{{ APP_NAME }}</span>
    </div>
    <h1 class="text-xl font-semibold text-slate-800 mb-2">{% trans "Tizimga kirish" %}</h1>
    <p class="text-slate-500 text-sm mb-6">{% trans "Xodimlar davomati va kechikishlarni kuzatuvchi tizim" %}</p>
    {% if form and form.non_field_errors %}
    <div class="mb-4 p-3 rounded-lg bg-red-50 text-red-700 text-sm border border-red-200">
      {% for err in form.non_field_errors %}{{ err }}{% endfor %}
    </div>
    {% endif %}
    <form method="post" action="{% url 'accounts:login' %}" class="space-y-4">
      {% csrf_token %}
      <div>
        <label for="id_username" class="block text-sm font-medium text-slate-700">{% trans "Foydalanuvchi nomi" %}</label>
        <input type="text" name="username" id="id_username" required autofocus value="{% if form %}{{ form.username.value|default:'' }}{% endif %}"
          class="mt-1 block w-full rounded-lg border border-slate-300 shadow-sm focus:ring-2 focus:ring-slate-500 focus:border-slate-500 px-3 py-2">
        {% if form and form.username.errors %}<p class="mt-1 text-sm text-red-600">{{ form.username.errors.0 }}</p>{% endif %}
      </div>
      <div>
        <label for="id_password" class="block text-sm font-medium text-slate-700">{% trans "Parol" %}</label>
        <input type="password" name="password" id="id_password" required
          class="mt-1 block w-full rounded-lg border border-slate-300 shadow-sm focus:ring-2 focus:ring-slate-500 focus:border-slate-500 px-3 py-2">
        {% if form and form.password.errors %}<p class="mt-1 text-sm text-red-600">{{ form.password.errors.0 }}</p>{% endif %}
      </div>
      <button type="submit" class="w-full bg-slate-800 text-white py-2.5 rounded-lg hover:bg-slate-700 font-medium">{% trans "Kirish" %}</button>
    </form>
  </div>

  <div class="w-full max-w-md mt-8 text-center text-sm text-slate-500 space-y-3">
    <p>
      <span class="font-medium text-slate-600">{% trans "Ishlab chiquvchi" %}:</span>
      <a href="https://geeks-soft.uz" target="_blank" rel="noopener" class="text-blue-600 hover:underline ml-1">Geeks Soft</a>
      ·
      <a href="tel:+998902113123" class="text-blue-600 hover:underline">+998 90 211 31 23</a>
      ·
      <a href="https://t.me/geeks_support" target="_blank" rel="noopener" class="text-blue-600 hover:underline">@geeks_support</a>
    </p>
    <p>
      <span class="font-medium text-slate-600">{% trans "Muallif" %}:</span>
      <a href="https://instagram.com/rashidov_21" target="_blank" rel="noopener" class="text-blue-600 hover:underline ml-1">Instagram</a>
      ·
      <a href="https://t.me/abdurahmonrashidov" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Telegram</a>
      ·
      <a href="https://youtube.com/@rashidov_21" target="_blank" rel="noopener" class="text-blue-600 hover:underline">YouTube</a>
      ·
      <a href="https://linkedin.com/in/rashidov_21" target="_blank" rel="noopener" class="text-blue-600 hover:underline">LinkedIn</a>
      <span class="text-slate-400"> — Abdurahmon Rashidov</span>
    </p>
  </div>
</body>
</html>
